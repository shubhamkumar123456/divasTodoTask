<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body{
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .container{
            width: 60%;
            max-width: 600px;
            min-height: 80vh;
            border: 2px solid;
        }
        input{
            width: 100%;
            padding:20px 10px;
        }
        .top{
            display: flex;
            height: 70px;
        }
        button{
            width: 100px;
            background-color: rgb(15, 29, 15);
            color: white;
            cursor: pointer;
        }
        button:hover{
            background-color: rgb(7, 233, 7);
            
        }
        .bottom{
            /* background-color: red; */
            /* min-height: calc(80vh - 70px); */
            /* height: 100%; */
        }
        table{
            width: 100%;
            /* height: max-content; */
        }
        tr,td,th{
            padding: 15px;
        }
        button{
            padding: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <form onsubmit="handleSubmit(event)" class="top">
            <input type="text" placeholder="enter a task ...">
            <button type="submit">></button>

            <!-- <button type="button">click me</button> -->
        </form>
        
        <table class="bottom" border="1">
            <thead>
                <tr>
                    <th>Sno</th>
                    <th>Task</th>
                    <th>status</th>
                    <th>Remove</th>
                    <th>Update</th>
                </tr>
            </thead>

            <tbody>
               
            </tbody>

        </table>
    </div>

    <script>

        let arr = JSON.parse(localStorage.getItem('taskItem')) || [];
        console.log(arr)
        let bottomTag = document.querySelector('.bottom')
        let inputTag = document.querySelector('input');
        let tbody = document.querySelector('tbody')
        // console.log(inputTag)

        let count = 0;

        const handleSubmit = (e)=>{
            e.preventDefault();
            let value = inputTag.value;
            console.log(value); //helo
            let obj = {
                status:'incompleted',
                task:value
            }
            // console.log(obj)
            arr.push(obj);
            console.log(arr)
            localStorage.setItem('taskItem', JSON.stringify(arr));
            printData();

// **************** Method 1 (using create element by own) ***********************
                // create elements
            // let tr = document.createElement('tr')
            // let td1 = document.createElement('td')
            // let td2 = document.createElement('td')
            // let td3 = document.createElement('td')
            // let td4 = document.createElement('td')
            // let td5 = document.createElement('td')
            // let delBtn = document.createElement('button')
            // let updateBtn = document.createElement('button')

            // insert inside elements
            // td1.innerHTML = count;
            // td2.innerHTML = value;
            // td3.innerHTML = 'incompleted';
            // delBtn.innerHTML = 'Delete'
            // updateBtn.innerHTML = 'Update'

            
            // append tags
                // td4.append(delBtn);
                // td5.append(updateBtn);
                // tr.append(td1,td2,td3,td4,td5);
                // tbody.append(tr);
            
            // remove 
            // inputTag.value = ''

// ********************* Method 2 (using innerHTML) **************************************

            // tbody.innerHTML = tbody.innerHTML + ` <tr>
            //         <td>${count}</td>
            //         <td>${value}</td>
            //         <td>incompleted</td>
            //         <td><button>Delete</button></td>
            //         <td><button>Update</button></td>
            //     </tr>`

            // console.log(tbody.innerHTML)
      
        }


        function printData(){
            let ans = JSON.parse(localStorage.getItem('taskItem'));
            console.log(ans);
            tbody.innerHTML = ''
            for(let i=0; i<ans.length; i++){
                let tr = document.createElement('tr')
            let td1 = document.createElement('td')
            let td2 = document.createElement('td')
            let td3 = document.createElement('td')
            let td4 = document.createElement('td')
            let td5 = document.createElement('td')
            let delBtn = document.createElement('button')
            let updateBtn = document.createElement('button')

            // insert inside elements
            td1.innerHTML = i+1;
            td2.innerHTML = arr[i].task;
            td3.innerHTML = arr[i].status;
            delBtn.innerHTML = 'Delete'
            updateBtn.innerHTML = 'Update'

            
            // append tags
                td4.append(delBtn);
                td5.append(updateBtn);
                tr.append(td1,td2,td3,td4,td5);
                tbody.append(tr);
            
            // remove 
            inputTag.value = ''

            }
        }

        printData()



        // local storage  --> space in browser  (5mb)
        // a) store data  -->  localstorage.setItem(key , value);
        //b) get data from local storage --> localstorage.getItem(key);
        // c)remove data on local storage --> localstorage.removeItem(key)
    </script>
</body>
</html>